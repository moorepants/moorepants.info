<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>  Notebook Entry | moorepants
</title>
  <link rel="canonical" href="https://moorepants.github.io/moorepants.info/blog/notebook-2013-09-11.html">


  <link rel="stylesheet" href="https://moorepants.github.io/moorepants.info/theme/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://moorepants.github.io/moorepants.info/theme/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://moorepants.github.io/moorepants.info/theme/css/pygments/default.min.css">
  <link rel="stylesheet" href="https://moorepants.github.io/moorepants.info/theme/css/theme.css">

  <link rel="alternate" type="application/atom+xml" title="Full Atom Feed"
        href="https://moorepants.github.io/moorepants.info/feeds/all.atom.xml">
  <link rel="alternate" type="application/atom+xml" title="Categories Atom Feed"
        href="https://moorepants.github.io/moorepants.info/feeds/{slug}.atom.xml">  
  <meta name="description" content="Today's task list: [x] Work on BMD papers [x] Do CITI course [] Work on parsing the walking data [] Book hotel for BMD [] Post update about BMD copyright [] Finish reading the van der Kooij paper [] See if our controller can drive an OpenSim model or Ton's 2D model [x] Wrap the â€¦">


</head>

<body>
  <header class="header">
    <div class="container">
<div class="row">
    <div class="col-sm-4">
      <a href="https://moorepants.github.io/moorepants.info/">
        <img class="img-fluid rounded" src=https://objects-us-east-1.dream.io/moorepants/headshot.jpg alt="moorepants">
      </a>
    </div>
  <div class="col-sm-8">
    <h1 class="title"><a href="https://moorepants.github.io/moorepants.info/">moorepants</a></h1>
      <p class="text-muted">a websitee</p>
      <ul class="list-inline">
            <li class="list-inline-item"><a href="https://moorepants.github.io/moorepants.info/about.html">About</a></li>
            <li class="list-inline-item"><a href="https://moorepants.github.io/moorepants.info/portfolio.html">Portfolio</a></li>
            <li class="list-inline-item"><a href="https://moorepants.github.io/moorepants.info/interests.html">Interests</a></li>
            <li class="list-inline-item"><a href="https://moorepants.github.io/moorepants.info/research.html">Research</a></li>
            <li class="list-inline-item"><a href="https://moorepants.github.io/moorepants.info/teaching.html">Teaching</a></li>
          <li class="list-inline-item"><a href="https://moorepants.github.io/moorepants.info/blog/">Blog</a></li>
      </ul>
  </div>
</div>    </div>
  </header>

  <div class="main">
    <div class="container">
      <h1>  Notebook Entry
</h1>
      <hr>
  <article class="article">
    <header>
      <ul class="list-inline">
        <li class="list-inline-item text-muted" title="2013-09-11T10:23:47-07:00">
          <i class="fa fa-clock-o"></i>
          Wed 11 September 2013
        </li>
        <li class="list-inline-item">
          <i class="fa fa-folder-open-o"></i>
          <a href="https://moorepants.github.io/moorepants.info/category/notebook.html">notebook</a>
        </li>
          <li class="list-inline-item">
            <i class="fa fa-user-o"></i>
              <a href="https://moorepants.github.io/moorepants.info/author/jason-k-moore.html">Jason K. Moore</a>          </li>
          <li class="list-inline-item">
            <i class="fa fa-files-o"></i>
              <a href="https://moorepants.github.io/moorepants.info/tag/notebook.html">#notebook</a>,               <a href="https://moorepants.github.io/moorepants.info/tag/python.html">#python</a>,               <a href="https://moorepants.github.io/moorepants.info/tag/bibtex.html">#bibtex</a>,               <a href="https://moorepants.github.io/moorepants.info/tag/bmd2013.html">#bmd2013</a>,               <a href="https://moorepants.github.io/moorepants.info/tag/human-body-model.html">#human body model</a>,               <a href="https://moorepants.github.io/moorepants.info/tag/cython.html">#cython</a>,               <a href="https://moorepants.github.io/moorepants.info/tag/c.html">#c</a>          </li>
      </ul>
    </header>


    <div class="content">
      <p>Today's task list:</p>
<ul class="simple">
<li>[x] Work on BMD papers</li>
<li>[x] Do CITI course</li>
<li>[] Work on parsing the walking data</li>
<li>[] Book hotel for BMD</li>
<li>[] Post update about BMD copyright</li>
<li>[] Finish reading the van der Kooij paper</li>
<li>[] See if our controller can drive an OpenSim model or Ton's 2D model</li>
<li>[x] Wrap the HBM C code</li>
<li>[] Duplicate website backups on a S3 bucket</li>
<li>[] Work on the website theme</li>
<li>[] Make generic settings on the lab website</li>
<li>[] Review the TODO items on the Yeadon paper</li>
<li>[] Do FERPA course</li>
<li>[] Write up database proposal</li>
<li>[] Try out CSympy with some mechanics problems</li>
<li>[] Email Mounir about teaching</li>
</ul>
<div class="section" id="gsoc">
<h2>GSoC</h2>
<p>Here is a video of the simulation Tarun's been working on as the main example
for pydy-viz:</p>
<iframe
  width="560"
  height="315"
  src="//www.youtube.com/embed/W6MIwXUw7jQ?list=UUzr8L2gEyk6i3oBwbRGhPGA"
  frameborder="0" allowfullscreen>
</iframe><p>It looks pretty good. Deriving the model, generating python functions to
numerically evaluated the EoMs, and then simulating is slow, but that wasn't
really part of his project. We'll be speeding that up soon and maybe we can
even write an ode solver in Javascript so we can do real time simulation and
change the parameters on the fly.</p>
</div>
<div class="section" id="bmd">
<h2>BMD</h2>
<p>I made some progress on the Whipple ID paper, basically just trimming my
thesis. I also got my bibliography in order and looked into BibLaTeX and biber
which are modern versions of bibtex, but didn't get them working. I have a main
.bib database I have all my bicycle/motorcycle papers in which is about 800
entries at the moment. I wrote a simple script that scans my tex document for
<cite>cite{}</cite> calls and then pulls those entries from the main .bib file and
generates a local file with only the entries for the paper. That way I can
maintain the info in the main database but ship the exact, smaller bib file
with the paper. This allows the bib file to reflect the state it was in when
the paper was last built and doesn't have entries that aren't used, yet allows
me to maintain the main bib file for longevity. The script:</p>
<pre class="literal-block">
#!/usr/bin/env python
# -*- coding: utf-8 -*-

&quot;&quot;&quot;This command line script allows you to extract the bibliographic entries
from a bibtex bib file based on the unique citations in a TeX/LaTeX file. I
keep all of my biblio information in a single database (bib file), but
desire to have a small bib file to include with the paper I'm writing. So
this script:

- scans the tex file for the unique citation keys (only works with
  \cite{AuthYear})
- gets the keys from the main bib file
- generates a new bib file with only the entries that are cited in the tex
file

You use it like this:

    python generate_sub_bib.py paper.tex main.bib sub_bib.bib

It requires the pybtex program:

    pip install pybtex

&quot;&quot;&quot;

# standard library
import re

# external libraries
from pybtex.database import BibliographyData
from pybtex.database.input import bibtex as input_bibtex
from pybtex.database.output import bibtex as output_bibtex


class SubBib(object):

    def __init__(self, path_to_tex, path_to_main, path_to_sub):
        self.path_to_tex = path_to_tex
        self.path_to_main = path_to_main
        self.path_to_sub = path_to_sub

        self.extract_unique_bibkeys()
        self.load_main_file()
        self.build_new_file()

    def extract_unique_bibkeys(self):
        with open(self.path_to_tex, 'r') as f:
            tex_text = f.read()

        self.unique_bibtex_keys = \
            list(set(re.findall(r'\\cite\{([a-zA-Z]*\d{4})\}', tex_text)))

    def load_main_file(self):
        parser = input_bibtex.Parser()
        self.main_bib_data = parser.parse_file(self.path_to_main)

    def build_new_file(self):
        new_entries = {}
        for key in self.main_bib_data.entries.keys():
            if key in self.unique_bibtex_keys:
                new_entries[key] = self.main_bib_data.entries[key]
        database = BibliographyData(entries=new_entries)
        writer = output_bibtex.Writer()
        writer.write_file(database, self.path_to_sub)


if __name__ == &quot;__main__&quot;:

    import argparse

    parser = argparse.ArgumentParser(
        description='Generate a sub bib file.')

    # python generate_sub_bib.py paper.tex main.bib subbib.tex

    parser.add_argument('paper', type=str,
        help=&quot;The tex file to find the citations.&quot;)

    parser.add_argument('mainbib', type=str,
        help=&quot;The main file.&quot;)

    parser.add_argument('subbib', type=str,
        help=&quot;The new subfile.&quot;)

    args = parser.parse_args()

    creator = SubBib(args.paper, args.mainbib, args.subbib)
</pre>
<p>I'll push this to a repo or gist on Github at some point.</p>
</div>
<div class="section" id="human-body-model">
<h2>Human Body Model</h2>
<p>I got the basics of a Cython wrapper for Ton's human body model C code in
place, but I can't test it out until I get more than the C header file. I used
these two references:</p>
<p><a class="reference external" href="http://docs.cython.org/src/tutorial/clibraries.html">http://docs.cython.org/src/tutorial/clibraries.html</a></p>
<p><a class="reference external" href="http://en.wikibooks.org/wiki/A_Little_C_Primer">http://en.wikibooks.org/wiki/A_Little_C_Primer</a></p>
</div>

    </div>
  </article>
    </div>
  </div>

  <footer class="footer">
    <div class="container">
<div class="row">
  <ul class="col-sm-6 list-inline">
      <li class="list-inline-item"><a href="https://moorepants.github.io/moorepants.info/authors.html">Authors</a></li>
    <li class="list-inline-item"><a href="https://moorepants.github.io/moorepants.info/archives.html">Archives</a></li>
    <li class="list-inline-item"><a href="https://moorepants.github.io/moorepants.info/categories.html">Categories</a></li>
      <li class="list-inline-item"><a href="https://moorepants.github.io/moorepants.info/tags.html">Tags</a></li>
  </ul>
  <p class="col-sm-6 text-sm-right text-muted">
    Generated by <a href="https://github.com/getpelican/pelican" target="_blank">Pelican</a>
    / <a href="https://github.com/nairobilug/pelican-alchemy" target="_blank">&#x2728;</a>
  </p>
</div>
<div class="row">
  <div class="col-sm-4 mx-auto text-center text-muted" >
    <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
      <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" />
    </a>
    <br />
    This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
  </div>
</div>    </div>
  </footer>
</body>

</html>